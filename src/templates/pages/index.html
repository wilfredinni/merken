{% extends 'base.html' %}
{% load static markdown_tag  %}

{% block seo %}
<meta property="og:title" content="{{ home_page.title }} - {{ settings.site_name }}">
<link rel="canonical" href="{{ settings.canonical_url }}">
<meta property="og:url" content="{{ settings.canonical_url }}">
<meta name="description" content="{{ home_page.overview }}">
<meta property="og:description" content="{{ home_page.overview }}">
<meta name="twitter:description" content="{{ home_page.overview }}" />
{% endblock seo %}

{% block css %}
<link rel="stylesheet" href="{% static 'css/atom-one-dark-min.css' %}">
{% endblock css %}

{% block title %}
<title>{{ home_page.title }} - {{ settings.site_name }}</title>
{% endblock title %}

{% block content %}
<div class="container section">

  <!-- search modal -->
  <div id="search-modal">
    <div class="search-content">
      <!-- search bar -->
      <div class="field search-mb">
        <spam class="control has-icons-left">
          <input id="search-bar" class="input search-bar" type="search" placeholder="Search">
          <span class="icon is-small is-left">
            <i class="fas fa-search"></i>
          </span>
        </spam>
      </div>
      <!-- search title -->
      <div id="search-message" class="search-message">
        Type to start searching
      </div>
      <!-- search title (clear search bar) -->
      <div style="display:none" id="clear-message" class="search-message">
        <span class="icon is-small">
          <i class="fas fa-times"></i>
        </span>
        Clear Search...
      </div>
      <!-- results -->
      <div id="results" class="search-results"></div>
    </div>
  </div>

  <div class="columns is-tablet">
    <!-- index -->
    <div id="index" class="column">
      <div class="overflow-index">
        <h4 class="title is-5 index">Table of Content</h4>
        <ul class="side-contents-list index-content" id="indexList"></ul>
      </div>
    </div>

    <!-- main column -->
    <div class="column is-8 cheat">

      <!-- pinned notification -->
      {% if message.content %}
        {% if message.enabled %}
        <div id="HomeMessage" class="content notification is-hidden-mobile index-notification">
          <button id="closeNotification" class="delete"></button>
          <div>
            {{ message.content|render_markdown|safe }}
          </div>
        </div>
        {% endif %}
      {% endif %}

      {% if settings.enable_ads %}
      <div id="codefund">
        <!-- fallback content -->
      </div>
      <script src="https://codefund.app/properties/92/funder.js?template=centered" async="async"></script>
      {% endif %}

      <!-- content -->
      <div>
        {{ home_page.content|render_markdown }}
      </div>
    </div>
  </div>
</div>

<!-- scroll top -->
<button id="scroll" class="material-scrolltop" type="scroll" title="Back to top">
  <i class="fas fa-chevron-up"></i>
</button>

<!-- quick search -->
<button id="search-icon" class="material-search" title="Quick Search - ctrl+z">
  <i class="fas fa-search"></i>
</button>

{% endblock content %}

{% block javascript %}
<script type="text/javascript" src="{% static 'js/notification.js' %}"></script>
<script type="text/javascript" src="{% static 'js/search-index.js' %}"></script>
<script type="text/javascript" src="{% static 'js/scroll.js' %}"></script>

<!-- tiny quoter -->
<script src="{% static 'js/tinyquoter.min.js' %}"></script>
<script>
  document.addEventListener("DOMContentLoaded", function (event) {
    window.TinyQ.init();
  });
</script>

<!-- highlight -->
<script type="text/javascript" src="{% static 'js/highlight.pack.js' %}"></script>
<script>
  hljs.initHighlightingOnLoad();
</script>

<!-- addthis -->
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5b05cb2ae9e75f31"></script>
<script type="text/javascript">
  var addthis_share = {
    url: "{{ settings.canonical_url }}",
    title: "{{ settings.site_name }}",
  };
</script>
{% endblock javascript %}